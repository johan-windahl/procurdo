{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/components/marketing/CPVSelector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport data from \"@/data/cpv.json\";\n\ntype Node = {\n  code: string;\n  name: string;\n  children?: Node[];\n};\n\ntype Props = {\n  value: string[];\n  onChange: (codes: string[]) => void;\n};\n\nexport default function CPVSelector({ value, onChange }: Props) {\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n\n  // Fast lookup by code\n  const nodeMap = useMemo(() => {\n    const map = new Map<string, Node>();\n    (data as Node[]).forEach((node) => {\n      map.set(node.code, node);\n    });\n    return map;\n  }, []);\n\n  // Top-level main divisions (XX000000)\n  const topLevelNodes = useMemo(() => {\n    return (data as Node[]).filter((node) => node.code.endsWith(\"000000\"));\n  }, []);\n\n  // Compute children dynamically if not present in JSON\n  const getChildrenForNode = useMemo(() => {\n    return (nodeCode: string): Node[] => {\n      const node = nodeMap.get(nodeCode);\n      if (node && node.children && node.children.length > 0) {\n        return node.children;\n      }\n\n      const all = data as Node[];\n      const children: Node[] = [];\n\n      if (nodeCode.endsWith(\"000000\")) {\n        // Main division (XX000000) -> groups (XXX00000)\n        const prefix = nodeCode.substring(0, 2);\n        children.push(\n          ...all.filter(\n            (n) =>\n              n.code.startsWith(prefix) &&\n              n.code.endsWith(\"00000\") &&\n              n.code !== nodeCode &&\n              n.code.length === 8\n          )\n        );\n      } else if (nodeCode.endsWith(\"00000\")) {\n        // Group (XXX00000) -> subgroups (XXXX0000)\n        const prefix = nodeCode.substring(0, 3);\n        children.push(\n          ...all.filter(\n            (n) =>\n              n.code.startsWith(prefix) &&\n              n.code.endsWith(\"0000\") &&\n              n.code !== nodeCode &&\n              n.code.length === 8\n          )\n        );\n      } else if (nodeCode.endsWith(\"0000\")) {\n        // Subgroup (XXXX0000) -> categories (XXXXX000)\n        const prefix = nodeCode.substring(0, 4);\n        children.push(\n          ...all.filter(\n            (n) =>\n              n.code.startsWith(prefix) &&\n              n.code.endsWith(\"000\") &&\n              n.code !== nodeCode &&\n              n.code.length === 8\n          )\n        );\n      } else if (nodeCode.endsWith(\"000\")) {\n        // Category (XXXXX000) -> subcategories and individual codes\n        const prefix = nodeCode.substring(0, 5);\n        children.push(\n          ...all.filter(\n            (n) =>\n              n.code.startsWith(prefix) &&\n              n.code !== nodeCode &&\n              n.code.length === 8 &&\n              !n.code.endsWith(\"000\")\n          )\n        );\n      }\n\n      return children;\n    };\n  }, [nodeMap]);\n\n  const toggleExpansion = (nodeCode: string) => {\n    setExpandedNodes((prev) => {\n      const next = new Set(prev);\n      if (next.has(nodeCode)) next.delete(nodeCode);\n      else next.add(nodeCode);\n      return next;\n    });\n  };\n\n  const toggleSelection = (node: Node, checked: boolean) => {\n    const codes = new Set(value);\n    if (checked) codes.add(node.code);\n    else codes.delete(node.code);\n    onChange(Array.from(codes));\n  };\n\n  const renderNode = (node: Node) => {\n    const isExpanded = expandedNodes.has(node.code);\n    const children = getChildrenForNode(node.code);\n    const hasChildren = children.length > 0;\n    const isSelected = value.includes(node.code);\n\n    return (\n      <li key={node.code} className=\"mb-1\">\n        <div className=\"flex items-center gap-2 p-1 rounded hover:bg-accent/40\">\n          {hasChildren ? (\n            <button\n              type=\"button\"\n              onClick={(e) => {\n                e.stopPropagation();\n                toggleExpansion(node.code);\n              }}\n              className=\"w-4 h-4 flex items-center justify-center text-muted-foreground hover:text-foreground\"\n              aria-expanded={isExpanded}\n            >\n              {isExpanded ? \"▼\" : \"▶\"}\n            </button>\n          ) : (\n            <div className=\"w-4\" />\n          )}\n\n          <input\n            id={`cpv-${node.code}`}\n            type=\"checkbox\"\n            checked={isSelected}\n            onChange={(e) => toggleSelection(node, e.target.checked)}\n            className=\"h-4 w-4\"\n          />\n\n          <label htmlFor={`cpv-${node.code}`} className=\"text-sm\">\n            <span className=\"font-mono text-muted-foreground mr-2\">{node.code}</span>\n            {node.name}\n          </label>\n        </div>\n        {hasChildren && isExpanded ? (\n          <ul className=\"mt-1 ml-4\">\n            {children.map((child) => renderNode(child))}\n          </ul>\n        ) : null}\n      </li>\n    );\n  };\n\n  const clearAllSelections = () => {\n    onChange([]);\n    setExpandedNodes(new Set());\n  };\n\n  return (\n    <div className=\"rounded-md border bg-card p-3\">\n      <div className=\"mb-2 flex justify-between items-center\">\n        <div className=\"text-sm font-medium\">\n          CPV-koder ({value.length} valda) - {topLevelNodes.length} kategorier att expandera\n        </div>\n        {value.length > 0 ? (\n          <button\n            type=\"button\"\n            onClick={clearAllSelections}\n            className=\"px-3 py-1 text-xs rounded border hover:bg-accent\"\n            title=\"Rensa alla val\"\n          >\n            Rensa\n          </button>\n        ) : null}\n      </div>\n      <div className=\"max-h-96 overflow-y-auto\">\n        <ul className=\"space-y-1\">\n          {topLevelNodes.map((node) => renderNode(node))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/components/marketing/SearchForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport CPVSelector from \"./CPVSelector\";\nimport countries from \"@/data/countries.json\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { formatThousandsSpaces, normalizeNumericInput } from \"@/lib/utils\";\n\nexport type Filters = {\n  cpvs: string[];\n  text: string;\n  dateFrom: string;\n  deadlineTo?: string;\n  country: string;\n  city: string;\n  status: \"ongoing\" | \"completed\";\n  noticeType?: string;\n  valueMin?: number | string;\n  valueMax?: number | string;\n};\n\ntype Props = {\n  initial?: Partial<Filters>;\n  onSearch: (filters: Filters) => void;\n};\n\nconst empty: Filters = {\n  cpvs: [],\n  text: \"\",\n  dateFrom: \"\",\n  deadlineTo: \"\",\n  country: \"\",\n  city: \"\",\n  status: \"ongoing\",\n  noticeType: \"\",\n  valueMin: \"\",\n  valueMax: \"\",\n};\n\nexport default function SearchForm({ onSearch, initial }: Props) {\n  const [filters, setFilters] = useState<Filters>({ ...empty, ...(initial || {}) });\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  const update = (f: Partial<Filters>) => setFilters((prev) => ({ ...prev, ...f }));\n\n  const submit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSearch(filters);\n  };\n\n  return (\n    <form onSubmit={submit} className=\"rounded-xl border bg-card p-6 space-y-5\">\n      {/* Quick filters */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <div className=\"md:col-span-2 space-y-1\">\n          <label className=\"block text-sm font-medium\">Sökning</label>\n          <input\n            className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n            value={filters.text}\n            onChange={(e) => update({ text: e.target.value })}\n            placeholder=\"Ex. it, bygg, konsult...\"\n          />\n        </div>\n        <div className=\"space-y-1\">\n          <label className=\"block text-sm font-medium\">Land</label>\n          <select\n            className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n            value={filters.country}\n            onChange={(e) => update({ country: e.target.value })}\n          >\n            <option value=\"\">Alla</option>\n            {countries.map((c) => (\n              <option key={c.code} value={c.code}>\n                {c.name}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <button\n          type=\"button\"\n          onClick={() => setShowAdvanced((v) => !v)}\n          className=\"text-sm text-muted-foreground hover:text-foreground\"\n        >\n          {showAdvanced ? \"Dölj avancerade filter\" : \"Visa avancerade filter\"}\n        </button>\n        <Button type=\"submit\" size=\"lg\">Sök</Button>\n      </div>\n\n      {/* Advanced filters */}\n      <div className={cn(\"space-y-5\", showAdvanced ? \"block\" : \"hidden\")}\n        aria-hidden={!showAdvanced}\n      >\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium\">CPV-koder</label>\n          <CPVSelector value={filters.cpvs} onChange={(cpvs) => update({ cpvs })} />\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Publicerad efter</label>\n            <input\n              type=\"date\"\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={filters.dateFrom}\n              onChange={(e) => update({ dateFrom: e.target.value })}\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Sista anbudsdag senast</label>\n            <input\n              type=\"date\"\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={filters.deadlineTo || \"\"}\n              onChange={(e) => update({ deadlineTo: e.target.value })}\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Ort</label>\n            <input\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={filters.city}\n              onChange={(e) => update({ city: e.target.value })}\n              placeholder=\"Ex. Stockholm\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Annonstyp</label>\n            <select\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={filters.noticeType || \"\"}\n              onChange={(e) => update({ noticeType: e.target.value })}\n            >\n              <option value=\"\">Alla</option>\n              <option value=\"Contract Notice\">Upphandlingsannons</option>\n              <option value=\"Prior Information Notice\">Förhandsannons</option>\n              <option value=\"Award Notice\">Tilldelningsannons</option>\n            </select>\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Värde (min)</label>\n            <input\n              type=\"text\"\n              inputMode=\"numeric\"\n              pattern=\"[0-9 ]*\"\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={formatThousandsSpaces(filters.valueMin || \"\")}\n              onChange={(e) => update({ valueMin: normalizeNumericInput(e.target.value) })}\n              placeholder=\"10 000\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"block text-sm font-medium\">Värde (max)</label>\n            <input\n              type=\"text\"\n              inputMode=\"numeric\"\n              pattern=\"[0-9 ]*\"\n              className=\"w-full rounded-md border bg-background px-3 py-2 text-sm\"\n              value={formatThousandsSpaces(filters.valueMax || \"\")}\n              onChange={(e) => update({ valueMax: normalizeNumericInput(e.target.value) })}\n              placeholder=\"1 000 000\"\n            />\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 660, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/lib/ted.ts"],"sourcesContent":["// Helpers to translate TED field values into Swedish for UI\n\nconst norm = (s: string) => s.trim().toLowerCase().replace(/[^a-z0-9]+/g, \"-\");\n\nexport function translateProcedureType(input?: string): string | undefined {\n  if (!input) return undefined;\n  const n = norm(input);\n  // Negotiated with/without call for competition (common short codes)\n  if (n.includes(\"neg-w-call\") || (n.includes(\"neg\") && n.includes(\"w-call\"))) {\n    return \"Förhandlat förfarande med föregående annonsering\";\n  }\n  if (\n    n.includes(\"neg-wo-call\") ||\n    n.includes(\"neg-w-o-call\") ||\n    n.includes(\"neg-without-call\") ||\n    n.includes(\"negotiated-without\")\n  ) {\n    return \"Förhandlat förfarande utan föregående annonsering\";\n  }\n  if (n.includes(\"open\")) return \"Öppet förfarande\";\n  if (n.includes(\"restricted\")) return \"Selektivt förfarande\";\n  if (n.includes(\"competitive-procedure-with-negotiation\")) return \"Konkurrenspräglat förfarande med förhandling\";\n  if (n.includes(\"competitive-dialogue\")) return \"Konkurrenspräglad dialog\";\n  if (n.includes(\"innovation-partnership\")) return \"Innovationspartnerskap\";\n  if (n.includes(\"negotiated\")) return \"Förhandlat förfarande\";\n  if (n.includes(\"dynamic-purchasing-system\")) return \"Dynamiskt inköpssystem\";\n  if (n.includes(\"direct-award\") || n.includes(\"directaward\")) return \"Direktupphandling\";\n  return input; // fallback as-is\n}\n\nexport function translateNoticeType(input?: string): string | undefined {\n  if (!input) return undefined;\n  const n = norm(input);\n  if (n.startsWith(\"cn\") || n.includes(\"contract-notice\")) return \"Upphandlingsannons\";\n  if (n.startsWith(\"can\") || n.includes(\"award-notice\")) return \"Tilldelningsannons\";\n  if (n.startsWith(\"pin\") || n.includes(\"prior-information\")) return \"Förhandsannons\";\n  if (n.includes(\"subco\")) return \"Annons om underleverantörer\";\n  if (n.includes(\"contract-award\")) return \"Tilldelningsannons\";\n  return input; // fallback\n}\n\nexport function translateContractNature(input?: string): string | undefined {\n  if (!input) return undefined;\n  const n = norm(input);\n  if (n.includes(\"services\")) return \"Tjänster\";\n  if (n.includes(\"works\")) return \"Byggentreprenad\";\n  if (n.includes(\"supplies\")) return \"Varor\";\n  return input;\n}\n"],"names":[],"mappings":"AAAA,4DAA4D;;;;;;;;;AAE5D,MAAM,OAAO,CAAC,IAAc,EAAE,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC,eAAe;AAEnE,SAAS,uBAAuB,KAAc;IACnD,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,IAAI,KAAK;IACf,oEAAoE;IACpE,IAAI,EAAE,QAAQ,CAAC,iBAAkB,EAAE,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,WAAY;QAC3E,OAAO;IACT;IACA,IACE,EAAE,QAAQ,CAAC,kBACX,EAAE,QAAQ,CAAC,mBACX,EAAE,QAAQ,CAAC,uBACX,EAAE,QAAQ,CAAC,uBACX;QACA,OAAO;IACT;IACA,IAAI,EAAE,QAAQ,CAAC,SAAS,OAAO;IAC/B,IAAI,EAAE,QAAQ,CAAC,eAAe,OAAO;IACrC,IAAI,EAAE,QAAQ,CAAC,2CAA2C,OAAO;IACjE,IAAI,EAAE,QAAQ,CAAC,yBAAyB,OAAO;IAC/C,IAAI,EAAE,QAAQ,CAAC,2BAA2B,OAAO;IACjD,IAAI,EAAE,QAAQ,CAAC,eAAe,OAAO;IACrC,IAAI,EAAE,QAAQ,CAAC,8BAA8B,OAAO;IACpD,IAAI,EAAE,QAAQ,CAAC,mBAAmB,EAAE,QAAQ,CAAC,gBAAgB,OAAO;IACpE,OAAO,OAAO,iBAAiB;AACjC;AAEO,SAAS,oBAAoB,KAAc;IAChD,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,IAAI,KAAK;IACf,IAAI,EAAE,UAAU,CAAC,SAAS,EAAE,QAAQ,CAAC,oBAAoB,OAAO;IAChE,IAAI,EAAE,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,iBAAiB,OAAO;IAC9D,IAAI,EAAE,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,sBAAsB,OAAO;IACnE,IAAI,EAAE,QAAQ,CAAC,UAAU,OAAO;IAChC,IAAI,EAAE,QAAQ,CAAC,mBAAmB,OAAO;IACzC,OAAO,OAAO,WAAW;AAC3B;AAEO,SAAS,wBAAwB,KAAc;IACpD,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,IAAI,KAAK;IACf,IAAI,EAAE,QAAQ,CAAC,aAAa,OAAO;IACnC,IAAI,EAAE,QAAQ,CAAC,UAAU,OAAO;IAChC,IAAI,EAAE,QAAQ,CAAC,aAAa,OAAO;IACnC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 712, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/components/marketing/ResultsList.tsx"],"sourcesContent":["export type Notice = {\n  publicationNumber: string;\n  publicationDate: string;\n  deadlineDate?: string;\n  title: string;\n  buyerName: string;\n  buyerCity?: string;\n  country?: string;\n  documentUrl?: string;\n  value?: string;\n  valueCurrency?: string;\n  description?: string;\n  classification?: string;\n  contractNature?: string;\n  noticeType?: string;\n  procedureType?: string;\n  frameworkAgreement?: boolean;\n};\n\ntype Props = {\n  results: Notice[];\n  page: number;\n  limit: number;\n  total: number;\n  onPage: (p: number) => void;\n};\n\nimport { translateProcedureType, translateNoticeType, translateContractNature } from \"@/lib/ted\";\nimport { formatThousandsSpaces } from \"@/lib/utils\";\n\nexport default function ResultsList({ results, page, limit, total, onPage }: Props) {\n  const pages = Math.max(1, Math.ceil(total / limit));\n  return (\n    <div className=\"mt-8 space-y-6\">\n      <ul className=\"space-y-4\">\n        {results.map((r) => (\n          <li key={r.publicationNumber} className=\"rounded-lg border p-6\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <h3 className=\"text-lg font-semibold leading-snug\">\n                {r.documentUrl ? (\n                  <a href={r.documentUrl} target=\"_blank\" rel=\"noreferrer\" className=\"hover:underline\">\n                    {r.title}\n                  </a>\n                ) : (\n                  <span>{r.title}</span>\n                )}\n              </h3>\n              <span className=\"text-xs text-muted-foreground whitespace-nowrap\" title=\"Publikationsnummer\">\n                {r.publicationNumber}\n              </span>\n            </div>\n            <div className=\"mt-2 flex flex-wrap gap-2 text-xs\">\n              {r.noticeType ? (\n                <span className=\"inline-flex items-center rounded-full border px-2 py-0.5\">\n                  {translateNoticeType(r.noticeType)}\n                </span>\n              ) : null}\n              {r.contractNature ? (\n                <span className=\"inline-flex items-center rounded-full border px-2 py-0.5\">\n                  {translateContractNature(r.contractNature)}\n                </span>\n              ) : null}\n              {r.frameworkAgreement ? (\n                <span className=\"inline-flex items-center rounded-full border px-2 py-0.5\">Ramavtal</span>\n              ) : null}\n            </div>\n            <div className=\"mt-3 grid gap-2 text-sm text-muted-foreground md:grid-cols-2\">\n              <div>\n                <span className=\"font-medium text-foreground\">Köpare:</span> {r.buyerName}\n              </div>\n              <div>\n                <span className=\"font-medium text-foreground\">Plats:</span> {r.buyerCity} {r.country}\n              </div>\n              <div>\n                <span className=\"font-medium text-foreground\">Publicerad:</span> {r.publicationDate}\n              </div>\n              {r.deadlineDate ? (\n                <div>\n                  <span className=\"font-medium text-foreground\">Sista anbudsdag:</span> {r.deadlineDate}\n                </div>\n              ) : null}\n              {r.value ? (\n                <div>\n                  <span className=\"font-medium text-foreground\">Värde:</span> {(() => {\n                    const n = Number(String(r.value).replace(/\\s/g, \"\").replace(/,/g, \".\"));\n                    return Number.isFinite(n) ? formatThousandsSpaces(n) : r.value;\n                  })()} {r.valueCurrency || ''}\n                </div>\n              ) : null}\n              {r.classification ? (\n                <div>\n                  <span className=\"font-medium text-foreground\">CPV-kod:</span> {r.classification}\n                </div>\n              ) : null}\n              {r.procedureType ? (\n                <div>\n                  <span className=\"font-medium text-foreground\">Förfarande:</span> {translateProcedureType(r.procedureType)}\n                </div>\n              ) : null}\n            </div>\n            {r.description ? (\n              <p className=\"mt-3 text-sm text-muted-foreground line-clamp-3\">{r.description}</p>\n            ) : null}\n          </li>\n        ))}\n      </ul>\n\n      {pages > 1 ? (\n        <div className=\"flex items-center justify-center gap-4\">\n          <button\n            type=\"button\"\n            disabled={page <= 1}\n            onClick={() => onPage(page - 1)}\n            className=\"px-3 py-1 rounded border bg-background disabled:opacity-50\"\n          >\n            Föregående\n          </button>\n          <span className=\"text-sm text-muted-foreground\">\n            Sida {page} av {pages}\n          </span>\n          <button\n            type=\"button\"\n            disabled={page >= pages}\n            onClick={() => onPage(page + 1)}\n            className=\"px-3 py-1 rounded border bg-background disabled:opacity-50\"\n          >\n            Nästa\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1024, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/components/ui/spinner.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype Props = {\n  size?: number;\n  className?: string;\n  label?: string;\n};\n\nexport default function Spinner({ size = 20, className, label }: Props) {\n  const style: React.CSSProperties = {\n    width: size,\n    height: size,\n  };\n  return (\n    <div className={cn(\"inline-flex items-center gap-2\", className)} aria-live=\"polite\" aria-busy=\"true\">\n      <div\n        className=\"animate-spin rounded-full border-2 border-muted-foreground/30 border-t-muted-foreground\"\n        style={style}\n        role=\"status\"\n        aria-label={label || \"Laddar\"}\n      />\n      {label ? <span className=\"text-sm text-muted-foreground\">{label}</span> : null}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,QAAQ,EAAE,OAAO,EAAE,EAAE,SAAS,EAAE,KAAK,EAAS;IACpE,MAAM,QAA6B;QACjC,OAAO;QACP,QAAQ;IACV;IACA,qBACE,6WAAC;QAAI,WAAW,IAAA,iJAAE,EAAC,kCAAkC;QAAY,aAAU;QAAS,aAAU;;0BAC5F,6WAAC;gBACC,WAAU;gBACV,OAAO;gBACP,MAAK;gBACL,cAAY,SAAS;;;;;;YAEtB,sBAAQ,6WAAC;gBAAK,WAAU;0BAAiC;;;;;uBAAgB;;;;;;;AAGhF","debugId":null}},
    {"offset": {"line": 1072, "column": 0}, "map": {"version":3,"sources":["file:///Users/jw11ab/repo/procurdo/apps/web/app/%28marketing%29/sv-se/sok-upphandling/SearchPageClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport SearchForm, { type Filters } from \"@/components/marketing/SearchForm\";\nimport ResultsList, { type Notice } from \"@/components/marketing/ResultsList\";\nimport Spinner from \"@/components/ui/spinner\";\n\nconst defaultFilters: Filters = {\n  cpvs: [],\n  text: \"\",\n  dateFrom: \"\",\n  deadlineTo: \"\",\n  country: \"\",\n  city: \"\",\n  status: \"ongoing\",\n  noticeType: \"\",\n  valueMin: \"\",\n  valueMax: \"\",\n};\n\nexport default function SearchPageClient() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  const [filters, setFilters] = useState<Filters>(defaultFilters);\n  const [results, setResults] = useState<Notice[]>([]);\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const limit = 20;\n\n  const initialFromParams = useMemo<Partial<Filters>>(() => {\n    if (!searchParams) return {};\n    const cpvParam = searchParams.get(\"cpv\");\n    const cpvs = cpvParam ? cpvParam.split(\",\").filter(Boolean) : [];\n    return {\n      cpvs,\n      text: searchParams.get(\"q\") || \"\",\n      dateFrom: searchParams.get(\"from\") || \"\",\n      deadlineTo: searchParams.get(\"to\") || \"\",\n      country: searchParams.get(\"country\") || \"\",\n      city: searchParams.get(\"city\") || \"\",\n      noticeType: searchParams.get(\"type\") || \"\",\n      valueMin: searchParams.get(\"min\") || \"\",\n      valueMax: searchParams.get(\"max\") || \"\",\n      status: (searchParams.get(\"status\") as Filters[\"status\"]) || \"ongoing\",\n    };\n  }, [searchParams]);\n\n  useEffect(() => {\n    setFilters((prev) => ({ ...prev, ...initialFromParams }));\n    const p = Number(searchParams?.get(\"page\") || \"1\") || 1;\n    setPage(p);\n  }, [initialFromParams, searchParams]);\n\n  const updateUrl = useCallback(\n    (f: Filters, p: number) => {\n      const params = new URLSearchParams();\n      if (f.cpvs.length) params.set(\"cpv\", f.cpvs.join(\",\"));\n      if (f.text) params.set(\"q\", f.text);\n      if (f.dateFrom) params.set(\"from\", f.dateFrom);\n      if (f.deadlineTo) params.set(\"to\", f.deadlineTo);\n      if (f.country) params.set(\"country\", f.country);\n      if (f.city) params.set(\"city\", f.city);\n      if (f.noticeType) params.set(\"type\", f.noticeType);\n      if (f.valueMin) params.set(\"min\", String(f.valueMin));\n      if (f.valueMax) params.set(\"max\", String(f.valueMax));\n      if (f.status && f.status !== \"ongoing\") params.set(\"status\", f.status);\n      if (p > 1) params.set(\"page\", String(p));\n      const qs = params.toString();\n      router.replace(qs ? `?${qs}` : \"\");\n    },\n    [router]\n  );\n\n  const runSearch = useCallback(\n    async (f: Filters, p = 1) => {\n      setHasSearched(true);\n      setLoading(true);\n      setError(null);\n      setPage(p);\n      updateUrl(f, p);\n      const res = await fetch(`/api/search?page=${p}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(f),\n      });\n      try {\n        const data = await res.json();\n        if (!res.ok || data?.error) {\n          const detail = data?.unsupportedValue && data?.parameterName\n            ? ` (${data.parameterName}: ${data.unsupportedValue})`\n            : \"\";\n          setError(`${data?.message || data?.error || 'Ett fel inträffade vid sökning'}${detail}`);\n          setResults([]);\n          setTotal(0);\n          return;\n        }\n        setResults(data.items || []);\n        setTotal(Number(data.total || 0));\n        if (p > 1) window.scrollTo({ top: 0, behavior: \"smooth\" });\n      } finally {\n        setLoading(false);\n      }\n    },\n    [updateUrl]\n  );\n\n  // Only auto-search when explicit query params exist in the URL\n  useEffect(() => {\n    if (!searchParams) return;\n    const hasQueryParams = searchParams.toString().length > 0;\n    if (hasQueryParams) {\n      const p = Number(searchParams.get(\"page\") || \"1\") || 1;\n      runSearch({ ...filters, ...initialFromParams }, p);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchParams]);\n\n  const onSubmit = (f: Filters) => {\n    setFilters(f);\n    runSearch(f, 1);\n  };\n\n  return (\n    <div className=\"mx-auto max-w-6xl px-4 sm:px-6 py-12\">\n      <h1 className=\"text-3xl font-semibold tracking-tight\">Hitta upphandlingar och ramavtal gratis</h1>\n      <p className=\"mt-2 text-muted-foreground\">\n        Sök och filtrera offentliga upphandlingar och ramavtal. Hitta aktuella upphandlingar med CPV-koder, fritext, datum och plats.\n      </p>\n      <div className=\"mt-8\">\n        <SearchForm onSearch={onSubmit} initial={initialFromParams} />\n      </div>\n      {error ? (\n        <div className=\"mt-6 rounded-md border border-destructive/30 bg-destructive/10 p-3 text-sm\">\n          {error}\n        </div>\n      ) : loading ? (\n        <div className=\"mt-8 flex justify-center\">\n          <Spinner size={22} label=\"Söker upphandlingar...\" />\n        </div>\n      ) : results.length > 0 ? (\n        <ResultsList\n          results={results}\n          page={page}\n          limit={limit}\n          total={total}\n          onPage={(p) => runSearch(filters, p)}\n        />\n      ) : hasSearched ? (\n        <p className=\"mt-8 text-sm text-center text-muted-foreground\">Inga resultat hittades</p>\n      ) : null}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}