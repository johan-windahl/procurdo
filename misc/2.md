# TED Europa API v3 Implementation Guide for Procurdo

## FINAL CORRECTED VERSION - Using Actual Supported Fields

---

## CORRECTION BASED ON ACTUAL API RESPONSE

Based on the actual TED API error response showing all supported fields, this document provides the **correct** field names and implementation guidance.

---

## 1. CORE REQUEST STRUCTURE (Confirmed Correct)

```json
{
  "query": "string",
  "fields": ["field1", "field2", ...],
  "page": 1,
  "limit": 10,
  "scope": "active",
  "pagination_mode": "page_number"
}
```

---

## 2. ESSENTIAL RESPONSE FIELDS FOR DISPLAY

### **Primary Display Fields (High Priority)**

#### **publication-number**

- **API Field**: `publication-number`
- **Description**: Unique TED publication reference number
- **Display**: Use as clickable reference linking to full tender details
- **Example**: "123456-2025"
- **Priority**: Essential

#### **notice-title**

- **API Field**: `notice-title`
- **Description**: Official tender title
- **Display**: Primary headline for each result, make prominent and clickable
- **Priority**: Essential

#### **buyer-name**

- **API Field**: `buyer-name`
- **Description**: Name of the contracting authority/buyer organization
- **Display**: Secondary line under title, make clickable for filtering
- **Priority**: Essential

#### **publication-date**

- **API Field**: `publication-date`
- **Description**: Date when tender was published
- **Display**: Format as "Published: DD MMM YYYY"
- **Priority**: Essential

#### **deadline**

- **API Field**: `deadline`
- **Description**: General deadline information
- **Display**: Prominent display with urgency color coding
- **Priority**: Essential

#### **deadline-receipt-tender-date-lot**

- **API Field**: `deadline-receipt-tender-date-lot`
- **Description**: Specific tender submission deadline date for lots
- **Display**: "Deadline: DD MMM YYYY" with color coding (red: urgent, amber: soon)
- **Priority**: High - More specific than general deadline

### **Financial Information Fields**

#### **estimated-value-lot**

- **API Field**: `estimated-value-lot`
- **Description**: Estimated contract value for individual lots
- **Display**: Format with currency symbol and appropriate units (€1.2M, €150K)
- **Priority**: High

#### **estimated-value-cur-lot**

- **API Field**: `estimated-value-cur-lot`
- **Description**: Currency of the estimated lot value
- **Display**: Use for proper currency formatting
- **Priority**: High

#### **tender-value**

- **API Field**: `tender-value`
- **Description**: Actual tender value (for awarded contracts)
- **Display**: Show for contract awards and results
- **Priority**: Medium

#### **contract-value**

- **API Field**: `contract-value`
- **Description**: Final contract value
- **Display**: For awarded/completed tenders
- **Priority**: Medium

### **Geographic and Classification Fields**

#### **buyer-country**

- **API Field**: `buyer-country`
- **Description**: Country of the contracting authority
- **Display**: Show country flag icon or country name
- **Priority**: High

#### **place-of-performance**

- **API Field**: `place-of-performance`
- **Description**: Where the contract work will be performed
- **Display**: Geographic location for work execution
- **Priority**: High

#### **country-origin**

- **API Field**: `country-origin`
- **Description**: Country of origin for the procurement
- **Display**: Additional geographic context
- **Priority**: Medium

#### **classification-cpv**

- **API Field**: `classification-cpv`
- **Description**: CPV classification codes and descriptions
- **Display**: Show both code and human-readable description
- **Priority**: High

### **Contract Information Fields**

#### **contract-nature**

- **API Field**: `contract-nature`
- **Description**: Type/nature of the contract (services, works, supplies)
- **Display**: Show as informational tag/badge
- **Priority**: High

#### **framework-agreement**

- **API Field**: `framework-agreement`
- **Description**: Indicates if this is a framework agreement
- **Display**: Show "Framework Agreement" badge when applicable
- **Priority**: Medium

#### **contract-duration**

- **API Field**: `contract-duration`
- **Description**: Duration of the contract
- **Display**: Format in human-readable terms ("24 months", "3 years")
- **Priority**: Medium

### **Process and Status Fields**

#### **notice-type**

- **API Field**: `notice-type`
- **Description**: Type of procurement notice
- **Display**: Show as badge (Contract Notice, Award Notice, etc.)
- **Priority**: High

#### **procedure-type**

- **API Field**: `procedure-type`
- **Description**: Procurement procedure type
- **Display**: Show as informational tag ("Open procedure", "Restricted procedure")
- **Priority**: Medium

#### **winner-name**

- **API Field**: `winner-name`
- **Description**: Name of winning bidder (for award notices)
- **Display**: Show for contract awards
- **Priority**: Medium

### **Document and URL Fields**

#### **document-url-lot**

- **API Field**: `document-url-lot`
- **Description**: URL to tender documents for specific lots
- **Display**: Show document download icon/link
- **Priority**: High

#### **document-url-part**

- **API Field**: `document-url-part`
- **Description**: URL to tender documents for parts
- **Display**: Alternative document link
- **Priority**: Medium

#### **buyer-profile**

- **API Field**: `buyer-profile`
- **Description**: Link to buyer's procurement profile
- **Display**: Link to buyer information
- **Priority**: Low

---

## 3. EXPERT QUERY CONSTRUCTION

Since the API uses expert query syntax, here are the correct approaches for common filters:

### **Text Search**

```json
{
  "query": "IT services",
  "fields": ["notice-title", "buyer-name", "publication-date", "deadline"]
}
```

### **Country Filtering**

Based on available fields, use buyer-country in boolean queries:

```json
{
  "query": "buyer-country:Sweden OR buyer-country:Norway",
  "fields": ["notice-title", "buyer-name", "buyer-country", "publication-date"]
}
```

### **Date Filtering**

```json
{
  "query": "publication-date:[2025-08-01 TO 2025-09-30]",
  "fields": ["notice-title", "buyer-name", "publication-date", "deadline"]
}
```

### **Value Range Filtering**

```json
{
  "query": "estimated-value-lot:[100000 TO 1000000]",
  "fields": ["notice-title", "estimated-value-lot", "estimated-value-cur-lot"]
}
```

---

## 4. RECOMMENDED FIELD COMBINATIONS FOR SEARCH RESULTS

### **Basic Search Results Display**

```json
{
  "fields": [
    "publication-number",
    "notice-title",
    "buyer-name",
    "publication-date",
    "deadline",
    "deadline-receipt-tender-date-lot",
    "buyer-country",
    "classification-cpv",
    "contract-nature"
  ]
}
```

### **Enhanced Results with Financial Info**

```json
{
  "fields": [
    "publication-number",
    "notice-title",
    "buyer-name",
    "publication-date",
    "deadline-receipt-tender-date-lot",
    "estimated-value-lot",
    "estimated-value-cur-lot",
    "buyer-country",
    "place-of-performance",
    "classification-cpv",
    "contract-nature",
    "notice-type",
    "document-url-lot"
  ]
}
```

### **Award/Results Display**

```json
{
  "fields": [
    "publication-number",
    "notice-title",
    "buyer-name",
    "winner-name",
    "contract-value",
    "tender-value",
    "buyer-country",
    "classification-cpv",
    "contract-duration"
  ]
}
```

---

## 5. UI IMPLEMENTATION RECOMMENDATIONS

### **Search Filters to Implement**

#### **Contract Value Filter**

- Use `estimated-value-lot` in query syntax
- UI: Range slider with presets (€10K-100K, €100K-1M, €1M+)
- Query: `estimated-value-lot:[10000 TO 100000]`

#### **Buyer/Organization Filter**

- Use `buyer-name` in query syntax
- UI: Searchable dropdown with autocomplete
- Query: `buyer-name:"Region Uppsala"`

#### **Geographic Filter**

- Use `buyer-country` and `place-of-performance`
- UI: Multi-select country dropdown
- Query: `buyer-country:Sweden OR buyer-country:Norway`

#### **Notice Type Filter**

- Use `notice-type` in query
- UI: Checkboxes (Contract Notice, Award Notice, etc.)
- Query: `notice-type:"Contract Notice"`

#### **Deadline Filter**

- Use `deadline-receipt-tender-date-lot` in date range queries
- UI: Date range picker with presets ("Next 7 days", "Next 30 days")
- Query: `deadline-receipt-tender-date-lot:[2025-09-05 TO 2025-10-05]`

### **Result Card Layout**

```
┌─────────────────────────────────────────────────────────────┐
│ [Notice Type Badge] [Framework Badge] [Urgency Indicator]  │
│ TENDER TITLE (notice-title)                    [Country]   │
│ Buyer Name (buyer-name) • Location (place-of-performance) │
│ Classification: CPV Code - Description                     │
│                                                             │
│ Value: €1.2M • Deadline: 15 Oct 2025 • [Doc Icon]        │
│ Published: 5 Sep 2025 • Type: Open Procedure              │
│ Publication #: 123456-2025                                 │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. IMPLEMENTATION PRIORITIES

### **Phase 1: Core Display Fields**

1. `publication-number` - Unique identifier/reference
2. `notice-title` - Main tender title
3. `buyer-name` - Contracting authority
4. `publication-date` - When published
5. `deadline-receipt-tender-date-lot` - Submission deadline
6. `buyer-country` - Geographic context

### **Phase 2: Enhanced Information**

1. `estimated-value-lot` + `estimated-value-cur-lot` - Financial info
2. `classification-cpv` - Category classification
3. `contract-nature` - Type of contract
4. `place-of-performance` - Work location
5. `document-url-lot` - Document access

### **Phase 3: Advanced Features**

1. `notice-type` - Notice categorization
2. `procedure-type` - Procurement procedure
3. `winner-name` - For award notices
4. `contract-duration` - Contract length
5. `framework-agreement` - Framework indicators

---

## 7. ERROR HANDLING NOTES

- The API is strict about field names - use exact names from the supported list
- Currency fields are separate from value fields (e.g., `estimated-value-lot` + `estimated-value-cur-lot`)
- Some fields may be lot-specific (ending in `-lot`) vs part-specific (ending in `-part`)
- Date fields may have specific format requirements in queries
- Boolean queries use standard Lucene syntax: `AND`, `OR`, `NOT`, field-specific searches with `field:value`

---

## 8. NEXT STEPS FOR TESTING

1. **Start with basic fields**: Test with `["publication-number", "notice-title", "buyer-name", "publication-date"]`
2. **Add filtering gradually**: Test each query syntax pattern individually
3. **Validate field availability**: Not all notices may have all fields populated
4. **Test different notice types**: Different notice types may have different available fields
5. **Check date formatting**: Ensure proper date format in both queries and responses

This corrected guide now uses the actual supported field names from the TED API v3 as confirmed by your error response.
